# Chap 7 협업

협업을 위해 고려되는 요소들
- 코드를 다수의 사용자가 유지보수 할 수 있게 하는 VCS
- 테라폼 state 를 중앙화하는 중앙 저장소

유형1
- 형상관리도구 없이 단순히 코드 공유하는 방식
- 작업자 수가 늘어날 수록 코드 동기화 어려워짐

유형2
- 형상관리도구를 이용하여 코드를 공유해 구성
- 형상관리도구가 제공하는 변경이력관리, 롤백 등이 가능해짐
- state는 프로비저닝의 결과물로 데이터저장소와 같다
- state는 형상관리도구 사용하면 안됨. 개인정보가 포함될 수 있고, 작업자가 서로 다른 프로비저닝을 수행한 State 결과를 공유하면 오류가 발생할 수 있음

유형3
- 형상관리를 위한 중앙 저장소와 State 백엔드를 구성
- 작업자가 프로비저닝을 수행할때, 원격 state를 확인하고 프로비저닝을 수행함

---

### 형상관리도구

- 생략

---

### State 백엔드

구성 목적
- 관리: 백엔드 구성이 없는 경우, local 구성이 기본으로 현재 state인 terraform.tfstate와 이전 상태인 terraform.tfstate.backup 만 보관됨. local 이외의 저장소가 필요함
- 공유: 다수의 작업자가 동일한 state로 접근해 프로비저닝하기 위한 공유 스토리지 필요
- 격리: 민감한 데이터가 State 파일에 저장될 가능성을 고려하여, 각각의 환경에 따라 접근 권한 필요


구성 가능한 백엔드
- consul
- gcs
- s3
- kubernetes Secret
- pg : Postgres database

백엔드 활용
- State에 대한 잠금 기능을 제공함
